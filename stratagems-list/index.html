<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<title>Helldivers 2 - Estratagemas</title>
<style>
  body{margin:0;font-family:Arial, sans-serif;background:#111;color:#fff;}
  header{background:#222;padding:10px;display:flex;justify-content:space-between;align-items:center;position:relative;}
  #toggleMenu{background:#444;color:#fff;border:none;width:44px;height:44px;font-size:1.3em;cursor:pointer;border-radius:8px;display:flex;align-items:center;justify-content:center;}
  
  /* === T√çTULO como bot√≥n === */
  .page-title-wrapper {
    position: absolute;
	left: 50%;
	top: 65%;
	transform: translate(-50%, -50%);
	display: flex;
	flex-direction: column;   /* T√≠tulo y bot√≥n en columnas (uno debajo del otro) */
	align-items: center;
	text-align: center;
  }

  #pageTitleBtn {
	background: none;
	border: none;
	font-size: 1.2em;
	font-weight: bold;
	color: #fff;
	cursor: pointer;
	padding: 0;
    line-height: 1.2; /* üëà Mejor espaciado entre l√≠neas */
  }

  /* üëá NUEVO: Estilo para el s√≠mbolo desplegable */
  .title-dropdown-indicator {
    font-size: 1.0em;
    color: #9C7D2D; /* üëà Color dorado para destacar */
    margin-top: 2px; /* üëà Pegado al t√≠tulo */
    line-height: 1;
    animation: pulse 2s infinite; /* üëà Efecto sutil de parpadeo */
  }

  @keyframes pulse {
    0%, 100% { opacity: 0.7; }
    50% { opacity: 1; }
  }

  /* Bot√≥n desplegable para volver */
  #backButton {
	display: none;            /* se muestra al activar la clase show */
	flex-direction: row;      /* icono + texto en la misma l√≠nea */
	align-items: center;
	justify-content: center;
	gap: 6px;
	margin-top: 6px;
	text-decoration: none;
	color: #fff;
	background: rgba(60,60,60,0.7);
	border-radius: 8px;
	padding: 6px 12px;
	font-size: 0.9em;
	box-shadow: 0 2px 6px rgba(0,0,0,0.3);
	transition: background 0.2s;
  }
  #backButton.show {
	display: inline-flex;     /* cuando se despliega, todo en una sola l√≠nea */
  }

  #backButton:hover {
	background: #9C7D2D;
  }

  .back-icon {
	width: 24px;
	height: 24px;
  }

  .back-text {
	font-size: 0.85em;
  }

  /* Bot√≥n de borrar */
  #clearButton {
    background:#444;
    color:#fff;
    border:none;
    width: 44px;
    height: 44px;
    font-size:1.3em;
    cursor:pointer;
    border-radius:8px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 10px;
    opacity: 0.5;
    transition: opacity 0.2s;
  }
  #clearButton.active { opacity: 1; }

  /* Panel lateral */
  #menu{position:fixed;top:0;left:0;height:100%;width:90%;max-width:400px;background:#1a1a1a;overflow-y:auto;transform:translateX(0);transition:transform .3s ease;padding:20px;z-index:9999;}
  #menu.hide{transform:translateX(-100%);}
  .menu-header{display:flex;justify-content:space-between;align-items:center;}

  /* Botones cuadrados en el header del men√∫ */
  .menu-buttons {
    display: flex;
    gap: 10px;
  }
  .square-btn {
    width: 44px;
    height: 44px;
    background:#444;
    border:none;
    color:#fff;
    font-size:1.3em;
    cursor:pointer;
    border-radius:8px;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
  }

  h2{margin-top:20px;border-bottom:1px solid #444;padding-bottom:5px;cursor:pointer;}
  .cat-content{margin-top:10px;display:grid;grid-template-columns:repeat(auto-fill,minmax(60px,1fr));gap:12px;}
  .cat-content.hide{display:none;}

  /* Estratagema cuadro */
  .estratagema{cursor:pointer;background:#1f1f1f;border:3px solid #aaa;border-radius:8px;padding:4px;display:flex;justify-content:center;align-items:center;transition:background .15s,transform .08s;position:relative;min-height:60px;}
  .estratagema:hover{background:#2c2c2c;transform:scale(1.05);}
  .estratagema img.icon{width:55px;height:55px;object-fit:cover;border-radius:4px;}

  .estratagema.selected {
    border-color: #666 !important;
    position: relative;
  }
  .estratagema.selected::after {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(10, 10, 10, 0.6);
    border-radius: 5px;
    pointer-events: none;
  }
  .estratagema.selected img.icon {
    filter: brightness(0.7);
  }

  /* Zona principal */
  #seleccionadas{margin:20px auto;max-width:1200px;display:grid;gap:20px;padding:20px;grid-template-columns: repeat(1, 1fr);}
  .card{background:#222;border-radius:10px;padding:10px;box-shadow:0 0 8px #000;display:flex;flex-direction:column;align-items:flex-start;}
  .fila{width:100%;display:flex;align-items:center;justify-content:space-between;gap:15px;}
  .fila img.arrow{width:36px;height:36px;margin:0 2px;}
  .nombre{margin-top:8px;font-size:1.1em;font-weight:bold;width:100%;text-align:left;}

  /* Modal idioma */
  #langModal{position:fixed;inset:0;background:rgba(0,0,0,.7);display:flex;justify-content:center;align-items:center;z-index:10000;}
  #langModal .box{background:#222;padding:18px;border-radius:12px;text-align:center;}
  #langModal button{margin:8px;padding:10px 18px;font-size:1.05em;cursor:pointer;border:none;border-radius:8px;background:#444;color:white;}
  #langModal .note{font-size:0.9em;color:#ccc;margin-top:8px;}

  #categorias::after {
    content: "";
    display: block;
    height: 60px;
  }

  /* === ESCRITORIO (m√°s de 768px) - ICONOS M√ÅS GRANDES === */
  @media (min-width: 769px) {
    .estratagema img.icon {
      width: 65px;
      height: 65px;
      object-fit: contain;
    }
    
    .estratagema {
      height: 75px;
      min-height: auto;
    }
    
    .cat-content {
      grid-template-columns: repeat(auto-fill, minmax(75px, 1fr));
      gap: 12px;
    }
  }

  /* M√≥vil */
	@media (max-width: 768px) {
	header {
      display: grid;
      grid-template-columns: 44px 1fr 44px;
      grid-template-areas: "clear title menu";
      align-items: center;
      gap: 10px;
      padding: 10px;
	}

	/* üëá A√ëADE ESTO */
	.page-title-wrapper {
      margin-top: 12px; /* üëà Ajusta este n√∫mero (8px, 10px, 12px, etc.) */
	}

    #clearButton { grid-area: clear; margin-right: 0; }

    .page-title-wrapper {
      grid-area: title;
      position: static;
      transform: none;
    }

    #pageTitleBtn {
      font-size: 1em;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* üëá AJUSTE M√ìVIL para el indicador */
    .title-dropdown-indicator {
      font-size: 0.9em;
      margin-top: 1px;
    }

    #toggleMenu { grid-area: menu; }

    #seleccionadas { grid-template-columns: repeat(1, 1fr); gap: 15px; padding: 15px; }

    #seleccionadas.mas-de-5 {
      grid-template-columns: repeat(2, 1fr);
      max-width: 100%;
    }

    #seleccionadas.mas-de-5 .card {
      flex-direction: column;
      align-items: center;
      padding: 8px;
    }

    #seleccionadas.mas-de-5 .fila { flex-direction: column; gap: 8px; }

    #seleccionadas.mas-de-5 .fila img:first-child { width: 50px; height: 50px; }

    #seleccionadas.mas-de-5 .nombre { display: none; }

    #seleccionadas.mas-de-5 .fila img.arrow { width: 24px; height: 24px; }

    #seleccionadas.mas-de-5 .card:nth-child(n+11) { display: none; }
  }

  /* Evita scroll lateral / zoom tipo app */
  html, body {
    overscroll-behavior: none;
    overflow-x: hidden;
    touch-action: manipulation;
  }
  
  /* Contenedor del bot√≥n fuera del header */
  #backButtonWrapper {
	text-align: center;
	margin-top: 10px;          /* separa el bot√≥n del header */
  }

  /* Bot√≥n de volver: texto arriba, iconos debajo */
  #backButton {
	display: inline-flex;
	flex-direction: column;    /* üîë dos l√≠neas internas */
	align-items: center;
	justify-content: center;
	gap: 4px;                  /* espacio entre texto e iconos */
	text-decoration: none;
	color: #fff;
	background: rgba(60,60,60,0.7);
	border-radius: 8px;
	padding: 10px 16px;
	font-size: 0.9em;
	box-shadow: 0 2px 6px rgba(0,0,0,0.3);
	transition: background 0.2s;
  }

  #backButton:hover {
	background: #9C7D2D;
  }

  #backButtonWrapper.hide {
	display: none;
  }

  .back-text {
	font-size: 0.95em;
	font-weight: bold;
  }

  .back-icons {
	display: flex;
	align-items: center;
	gap: 4px;
  }

  .back-icon {
	width: 24px;
	height: 24px;
  }
</style>
</head>
<body>
<header>
  <button id="clearButton" title="Eliminar todas las estratagemas" aria-label="Eliminar todas las estratagemas">üóëÔ∏è</button>

  <div class="page-title-wrapper">
    <button id="pageTitleBtn">
      <span id="pageTitle">ARSENAL DE LA DEMOCRACIA</span>
      <div class="title-dropdown-indicator">‚ñº</div> <!-- üëà NUEVA L√çNEA -->
    </button>
  </div>

  <button id="toggleMenu" title="Abrir men√∫ de estratagemas">‚ò∞</button>
</header>

<!-- Bot√≥n desplegable fuera del header -->
<div id="backButtonWrapper" class="hide">
  <a href="../index.html" id="backButton">
    <span class="back-icons">üõ†Ô∏è <img src="https://i.imgur.com/f0pKLzX.png" class="back-icon" alt="HD2 Logo"> üõ†Ô∏è</span>
	<span class="back-text">VOLVER</span>
  </a>
</div>

<!-- Modal idioma -->
<div id="langModal" role="dialog" aria-modal="true">
  <div class="box">
    <h2>Choose Language / Elige Idioma</h2>
    <div>
      <button data-lang="en" id="btnEn">üá∫üá∏ English</button>
      <button data-lang="es" id="btnEs">üá™üá∏ Espa√±ol</button>
    </div>
  </div>
</div>

<!-- Panel -->
<div id="menu" aria-hidden="false">
  <div class="menu-header">
    <h1 id="menuTitle">Selecciona Estratagemas</h1>
    <div class="menu-buttons">
      <button class="square-btn" id="reopenLang">üåê</button>
	  <button class="square-btn" id="closeMenu">‚ò∞</button>      
    </div>
  </div>
  <div id="categorias"></div>
</div>

<main id="seleccionadas" aria-live="polite"></main>

<script>
// ... (el resto del JavaScript se mantiene igual)
document.addEventListener('DOMContentLoaded', ()=>{

  const arrowImgs = {
    up:   "https://static.wikia.nocookie.net/helldivers_gamepedia/images/5/51/Up_Arrow.png",
    down: "https://static.wikia.nocookie.net/helldivers_gamepedia/images/1/13/Down_Arrow.png",
    left: "https://static.wikia.nocookie.net/helldivers_gamepedia/images/4/4e/Left_Arrow.png",
    right:"https://static.wikia.nocookie.net/helldivers_gamepedia/images/3/3c/Right_Arrow.png"
  };

  let estratagemas = [];   // cargado por fetch
  let currentLang = 'es';
  let seleccionadasIds = new Set(); // Para trackear las selecciones

  // refs
  const langModal = document.getElementById('langModal');
  const btnEn = document.getElementById('btnEn');
  const btnEs = document.getElementById('btnEs');  
  const reopenLang = document.getElementById('reopenLang');
  const menu = document.getElementById('menu');
  const categoriasDiv = document.getElementById('categorias');
  const seleccionadas = document.getElementById('seleccionadas');
  const toggleMenu = document.getElementById('toggleMenu');
  const closeMenu = document.getElementById('closeMenu');
  const clearButton = document.getElementById('clearButton');
  const pageTitleBtn = document.getElementById('pageTitleBtn');
  const backWrapper = document.getElementById('backButtonWrapper');
  const backText = document.querySelector('#backButton .back-text');

  pageTitleBtn.addEventListener('click', () => {
	backWrapper.classList.toggle('hide');
});


  // listeners del modal (seguro)
  btnEn.addEventListener('click', ()=> chooseLang('en'));
  btnEs.addEventListener('click', ()=> chooseLang('es'));  
  reopenLang.addEventListener('click', ()=> { langModal.style.display = 'flex'; });
  toggleMenu.addEventListener('click', ()=> menu.classList.toggle('hide'));
  closeMenu.addEventListener('click', ()=> menu.classList.add('hide'));
  clearButton.addEventListener('click', clearAllSelections);

  // ayuda: cerrar modal con Escape
  document.addEventListener('keydown', (e)=>{
    if(e.key === 'Escape') {
      if(langModal.style.display === 'flex') langModal.style.display = 'none';
      else menu.classList.add('hide');
    }
  });

  // üëá NUEVO: bloquear zoom por doble-tap
  document.addEventListener('touchend', e=>{
    if(e.touches.length > 1) e.preventDefault();
  }, {passive:false});

  // üëá NUEVO: evitar desplazamiento vertical/horizontal con dos dedos
  document.addEventListener('gesturestart', e=> e.preventDefault());

document.querySelectorAll('.btn').forEach(b => {
  b.addEventListener('click', () => {
    if (inputLocked) return;
    addDir(b.dataset.dir);
  });
});

  // funcion escoger idioma
  function chooseLang(lang){
    currentLang = lang;
    langModal.style.display = 'none';
    
    // Actualizar t√≠tulo de la p√°gina
    updatePageTitle();
	
	backText.textContent = currentLang === 'en' ? 'BACK' : 'VOLVER';
    
    if(estratagemas.length) renderMenu();
    updateSelectedNames();
    console.log('Idioma cambiado a', currentLang);
  }

  // Actualizar t√≠tulo de la p√°gina seg√∫n idioma
  function updatePageTitle() {
    pageTitle.textContent = currentLang === 'en' ? 'DEMOCRACY ARSENAL' : 'ARSENAL DE LA DEMOCRACIA';
  }

  // Limpiar todas las selecciones
  function clearAllSelections() {
    if (seleccionadas.children.length === 0) return;
    
    seleccionadas.innerHTML = '';
    seleccionadasIds.clear();
    updateGridColumns();
    updateClearButtonState();
    updateSelectionVisuals(); // Actualizar visualmente las selecciones
  }

  // Actualizar estado del bot√≥n de limpiar
  function updateClearButtonState() {
    if (seleccionadas.children.length > 0) {
      clearButton.classList.add('active');
      clearButton.title = currentLang === 'en' ? 'Clear all stratagems' : 'Eliminar todas las estratagemas';
    } else {
      clearButton.classList.remove('active');
    }
  }

  // Actualizar indicadores visuales de selecci√≥n
  function updateSelectionVisuals() {
    // Actualizar todas las estratagemas en el men√∫
    document.querySelectorAll('.estratagema').forEach(el => {
      const id = el.dataset.id;
      if (seleccionadasIds.has(id)) {
        el.classList.add('selected');
      } else {
        el.classList.remove('selected');
      }
    });
  }

  // Cargar JSON
  async function cargarEstratagemas() {
    try {
      const url = 'https://raw.githubusercontent.com/Kart0/HD2-STRATAGEMS/refs/heads/main/estratagemas.json';
      const res = await fetch(url);
      if(!res.ok) throw new Error(`HTTP ${res.status} ${res.statusText}`);
      estratagemas = await res.json();
      console.log('Estratagemas cargadas:', estratagemas.length);
      renderMenu();
    } catch (err) {
      console.error('Error cargando estratagemas.json:', err);
    }
  }

  // Render lateral en grid
  function renderMenu(){
    categoriasDiv.innerHTML = '';
    document.getElementById('menuTitle').textContent = currentLang === 'en' ? 'Select Stratagems' : 'Selecciona Estratagemas';

    // Agrupar por categor√≠a
    const grupos = {};
    estratagemas.forEach(item=>{
      // Omitir eagle-rearm del men√∫ lateral
      if (item.id === 'eagle-rearm') return;
      
      const en = item.category.en || item.category['en'] || '';
      const es = item.category.es || item.category['es'] || '';
      const key = en + '||' + es;
      if(!grupos[key]) grupos[key] = { en, es, items: [] };
      grupos[key].items.push(item);
    });

    const desiredOrder = [
      'MISSION||MISI√ìN',
      'OFFENSIVE||OFENSIVAS',
      'SUPPLY||SUMINISTROS',
      'DEFENSIVE||DEFENSIVAS'
    ];
    
    const keysOrdered = [];
    desiredOrder.forEach(k=> { if(grupos[k]) keysOrdered.push(k); });
    Object.keys(grupos).forEach(k=>{ if(!keysOrdered.includes(k)) keysOrdered.push(k); });

    // construir html
    keysOrdered.forEach(key=>{
      const group = grupos[key];
      if(!group) return;
      const catDiv = document.createElement('div');
      catDiv.className = 'categoria';

      const header = document.createElement('h2');
      header.className = 'cat-header';
      header.dataset.en = group.en;
      header.dataset.es = group.es;
      header.textContent = (currentLang === 'en' ? group.en : group.es) + ' ‚ñæ';

      const content = document.createElement('div');
      content.className = 'cat-content';

      // cada item como cuadro solo imagen
      group.items.forEach(it=>{
        const box = document.createElement('div');
        box.className = 'estratagema';
        box.dataset.id = it.id;
        box.dataset.en = it.name.en;
        box.dataset.es = it.name.es;
        box.dataset.img = it.image;
        box.dataset.combo = (it.combo || []).join(',');

        // Marcar como seleccionado si est√° en el Set
        if (seleccionadasIds.has(it.id)) {
          box.classList.add('selected');
        }

        const img = document.createElement('img');
        img.className = 'icon';
        img.src = it.image;
        img.alt = it.name[currentLang] || it.name.en || it.name.es || '';
        box.appendChild(img);

        // al click toggleamos la selecci√≥n
        box.addEventListener('click', ()=> toggleCardById(it.id));

        content.appendChild(box);
      });

      // plegar/desplegar
      header.addEventListener('click', ()=>{
        content.classList.toggle('hide');
        const isHidden = content.classList.contains('hide');
        header.textContent = (currentLang === 'en' ? group.en : group.es) + (isHidden ? ' ‚ñ∏' : ' ‚ñæ');
      });

      catDiv.appendChild(header);
      catDiv.appendChild(content);
      categoriasDiv.appendChild(catDiv);
    });
  }

  function updateGridColumns(){
    const total = seleccionadas.children.length;
    
    // Actualizar estado del bot√≥n de limpiar
    updateClearButtonState();
    
    // Para m√≥viles: aplicar clases especiales cuando hay m√°s de 5 elementos
    if (window.innerWidth <= 768) {
      if (total > 5) {
        seleccionadas.classList.add('mas-de-5');
        seleccionadas.style.gridTemplateColumns = 'repeat(2, 1fr)';
      } else {
        seleccionadas.classList.remove('mas-de-5');
        seleccionadas.style.gridTemplateColumns = 'repeat(1, 1fr)';
      }
    } else {
      // Para escritorio: mantener la l√≥gica original
      seleccionadas.classList.remove('mas-de-5');
      const cols = Math.max(1, Math.ceil(total / 5));
      seleccionadas.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;
    }
  }

  // A√±ade o quita tarjeta en zona principal por id
function toggleCardById(id){
  const item = estratagemas.find(x => x.id === id);
  if(!item){
    console.warn('No se encontr√≥ estratagema con id', id);
    return;
  }

  const existing = seleccionadas.querySelector(`.card[data-id="${CSS.escape(id)}"]`);
  if(existing){ 
      existing.remove();
      seleccionadasIds.delete(id);
      updateGridColumns();
      updateSelectionVisuals();
      // Verificar si necesitamos quitar eagle-rearm
      updateEagleRearm();
      return;
  }

  const card = document.createElement('div');
  card.className = 'card';
  card.dataset.id = id;

  const fila = document.createElement('div');
  fila.className = 'fila';

  const icon = document.createElement('img');
  icon.src = item.image;
  icon.width = 60; icon.height = 60;
  icon.alt = item.name[currentLang] || item.name.en || item.name.es || '';

  const arrows = document.createElement('div');
  (item.combo || []).forEach(dir=>{
    const a = document.createElement('img');
    a.className = 'arrow';
    const src = arrowImgs[dir] || arrowImgs[dir.toLowerCase()] || '';
    a.src = src;
    a.alt = dir;
    arrows.appendChild(a);
  });

  fila.appendChild(icon);
  fila.appendChild(arrows);

  const nombreDiv = document.createElement('div');
  nombreDiv.className = 'nombre';
  nombreDiv.textContent = item.name[currentLang] || item.name.en || item.name.es || '';

  card.appendChild(fila);
  card.appendChild(nombreDiv);
  
  // Insertar en posici√≥n espec√≠fica si es eagle-rearm, al final para las dem√°s
  if (id === 'eagle-rearm') {
    // Encontrar la primera estratagema de √°guila
    const eagleStratagems = [
      "eagle-500kg-bomb", 
      "eagle-strafing-run", 
      "eagle-110mm-rocket-pods", 
      "eagle-airstrike", 
      "eagle-cluster-bomb", 
      "eagle-napalm-strike", 
      "eagle-smoke-strike"
    ];
    
    let primeraEagle = null;
    for (const eagleId of eagleStratagems) {
      const eagleCard = seleccionadas.querySelector(`.card[data-id="${eagleId}"]`);
      if (eagleCard) {
        primeraEagle = eagleCard;
        break;
      }
    }
    
    // Insertar antes de la primera √°guila encontrada, o al final si no hay √°guilas
    if (primeraEagle) {
      seleccionadas.insertBefore(card, primeraEagle);
    } else {
      seleccionadas.appendChild(card);
    }
  } else {
    seleccionadas.appendChild(card);
  }
  
  seleccionadasIds.add(id);
  updateSelectionVisuals();
  updateGridColumns();
  
  // Verificar si necesitamos a√±adir eagle-rearm
  if (id !== 'eagle-rearm') {
    updateEagleRearm();
  }
}

  // Funci√≥n para actualizar el estado de eagle-rearm
function updateEagleRearm() {
  const eagleStratagems = [
    "eagle-500kg-bomb", 
    "eagle-strafing-run", 
    "eagle-110mm-rocket-pods", 
    "eagle-airstrike", 
    "eagle-cluster-bomb", 
    "eagle-napalm-strike", 
    "eagle-smoke-strike"
  ];
  
  // Verificar si hay alguna estratagema eagle seleccionada
  const hasEagleSelected = eagleStratagems.some(id => seleccionadasIds.has(id));
  const eagleRearmSelected = seleccionadasIds.has('eagle-rearm');
  const eagleRearmItem = estratagemas.find(x => x.id === 'eagle-rearm');
  
  if (hasEagleSelected && !eagleRearmSelected && eagleRearmItem) {
    // A√±adir eagle-rearm si hay eagles seleccionadas pero no est√° presente
    toggleCardById('eagle-rearm');
  } else if (!hasEagleSelected && eagleRearmSelected) {
    // Quitar eagle-rearm si no hay eagles seleccionadas pero est√° presente
    toggleCardById('eagle-rearm');
  } else if (hasEagleSelected && eagleRearmSelected) {
    // Si ya est√° presente, reposicionarlo correctamente
    const eagleRearmCard = seleccionadas.querySelector(`.card[data-id="eagle-rearm"]`);
    if (eagleRearmCard) {
      // Encontrar la primera estratagema de √°guila
      let primeraEagle = null;
      for (const eagleId of eagleStratagems) {
        const eagleCard = seleccionadas.querySelector(`.card[data-id="${eagleId}"]`);
        if (eagleCard) {
          primeraEagle = eagleCard;
          break;
        }
      }
      
      // Reinsertar en la posici√≥n correcta si es necesario
      if (primeraEagle && eagleRearmCard.nextElementSibling !== primeraEagle) {
        seleccionadas.removeChild(eagleRearmCard);
        seleccionadas.insertBefore(eagleRearmCard, primeraEagle);
      }
    }
  }
}

  // Cuando cambia idioma, actualizar nombres de tarjetas ya creadas
  function updateSelectedNames(){
    if(!estratagemas.length) return;
    document.querySelectorAll('#seleccionadas .card').forEach(card=>{
      const id = card.dataset.id;
      const info = estratagemas.find(x => x.id === id);
      if(info){
        const nuevo = info.name[currentLang] || info.name.en || info.name.es;
        const nombreDiv = card.querySelector('.nombre');
        if(nombreDiv) nombreDiv.textContent = nuevo;
        const icon = card.querySelector('img');
        if(icon) icon.alt = info.name[currentLang] || icon.alt;
      }
    });
  }

  // A√±adir listener para redimensionamiento de ventana
  window.addEventListener('resize', updateGridColumns);

  // iniciar carga
  cargarEstratagemas();

  console.log('Interfaz lista ‚Äî abre la consola (F12) si algo no carga.');

});
</script>
</body>
</html>